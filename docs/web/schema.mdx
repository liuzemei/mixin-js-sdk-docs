---
sidebar_position: 4
---

# Schema

用于与原生客户端进行交互的 api。

## 一、用户相关

### 1. 弹框打开好友的介绍页

```js
const user_id = `uuid`;
Mixin.openUserModal(user_id);
```

> [Mixin 环境点击这里测试](mixin://users/e8e8cd79-cd40-4796-8c54-3a13cfe50115)

### 2. 打开某个聊天的会话页面

```js
const conversation_id = `uuid`;
const user_id = `uuid`;
Mixin.openConversation(conversation_id, user_id);
```

:::tip 提示

1. 如果是群组的话，可以不用传 `user_id` 。
2. 非群组用户，当 `conversation` 还未创建时，会使用 `user_id` 和点击链接用户的 `user_id`，创建一个 `conversation`。

:::

### 3. 打开某个机器人的首页

```js
const app_id = 'uuid';
Mixin.openAppHomePage(app_id, { foo: 'bar' });
```

> [Mixin 环境点击这里测试](mixin://apps/d3b01d37-6ce0-4c3d-8586-0705413778e4?action=open)

:::tip 提示

1. 第一个参数 app_id 是机器人的 client_id 或者可以理解为 机器人的 user_id
2. 第二个参数是 打开机器人首页时，可以在 url 上传的参数。对应机器人可以通过 url 获取到这个 `{foo:"bar"}`

:::

## 二、分享相关

直接会调起选择会话的界面，用户点击会话之后就完成了消息转发。

### 1. 分享一段文字

```js
Mixin.shareTextToFriend('要分享的文字');
```

### 2. 分享一个支持 md 的文章

```js
const markdownPost = '# hahaha';
Mixin.sharePostToFriend(markdownPost);
```

### 3. 分享一张图片

```js
const imageURL = `https://developers.mixin.one/images/logo.svg`;
Mixin.shareImageToFriend(imageURL);
```

### 4. 分享一个联系人

```js
const user_id = `uuid`;
Mixin.shareContactToFriend(user_id);
```

### 5. 分享一个应用卡片

```js
const appCard = {
  app_id: 'uuid',
  title: 'Mixin官网',
  description: '隐私、安全、快速、牛逼。',
  icon_url: 'https://developers.mixin.one/images/logo.svg',
  action: 'https://mixin.one',
};
Mixin.shareAppCardToFriend(appCard);
```

参数介绍

| 参数        | 类型        | 介绍                                                                                         |
| :---------- | :---------- | :------------------------------------------------------------------------------------------- |
| app_id      | UUID String | 打开机器人的 client_id，用户打开链接之后，通过右上角三个点，可以直接打开机器人的介绍页弹框。 |
| title       | String      | 标题                                                                                         |
| description | String      | 描述信息                                                                                     |
| icon_url    | String      | 图标                                                                                         |
| action      | String      | 打开的链接                                                                                   |

### 6. 分享一个直播/视频卡片

```js
const liveCard = {
  url: 'xxxx.m3u8',
  width: 300,
  height: 500,
  thumb_url: '',
};
Mixin.shareLiveToFriend(liveCard);
```

| 参数      | 类型        | 介绍                         |
| :-------- | :---------- | :--------------------------- |
| url       | UUID String | m3u8 的地址或者是 mp4 的地址 |
| width     | Number      | 卡片的宽度                   |
| height    | Number      | 卡片的高度                   |
| thumb_url | String      | 封面的图片地址，可以为空     |
